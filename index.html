<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>An AI hotel Booking Platform</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" type="text/css"
    href="//fonts.googleapis.com/css?family=|Roboto+Sans:400,700|Playfair+Display:400,700">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="css/animate.css">
  <link rel="stylesheet" href="css/aos.css">
  <link rel="stylesheet" href="css/fancybox.min.css">
  <link rel="stylesheet" href="css/hoteldetails.css">

  <link rel="stylesheet" href="fonts/ionicons/css/ionicons.min.css">
  <link rel="stylesheet" href="fonts/fontawesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="css/navigation.css">
  <link rel="stylesheet" href="css/style.css">
  <style>
    .site-header {
      background-color: #ffffff;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      padding: 15px 0;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .site-logo a {
      font-size: 24px;
      font-weight: bold;
      color: #050b7c;
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .site-logo a:hover {
      color: #000557;
    }

    @media (max-width: 991px) {
      .site-header .text-end {
        text-align: right !important;
      }
    }

    .hotel-description h4 {
      margin-top: 1.5rem;
      margin-bottom: 0.5rem;
      color: #050b7c;
      font-weight: 600;
    }

    .hotel-description p {
      margin-bottom: 1rem;
      line-height: 1.6;
    }


    .room-card {
      border: 1px solid #ccc;
      padding: 15px;
      margin: 10px 0;
      border-radius: 8px;
      background: #f9f9f9;
    }

    .btn {
      background: #050b7c;
      color: white;
      border: none;
      padding: 10px;
      cursor: pointer;
      border-radius: 5px;
    }



    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    #rooms-list {
      margin-top: 20px;
    }



    .guest-dropdown button.btn-outline-secondary {
      border-radius: 4px;
      width: 40px;
      height: 30px;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }

    .guest-dropdown input.form-control {
      border: none;
      background: transparent;
      width: 30px;
      height: 30px;
      padding: 0;
      font-weight: 500;
    }

    .guest-dropdown .btn-primary {
      border-radius: 4px;
      height: 40px;
      font-weight: 500;
    }

    .guest-dropdown .d-flex {
      margin-bottom: 10px;
    }

    #guestDropdown {
      width: 100%;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      border-radius: 4px;
      border: 1px solid #e0e0e0;
    }

    .guest-dropdown span {
      font-size: 14px;
    }

    .guest-dropdown .d-flex.align-items-center {
      gap: 5px;
    }




    .star-rating {
      display: inline-flex;
      align-items: center;
      margin-bottom: 10px;
    }

    .star-rating .stars {
      color: #ffc107;
      margin-right: 5px;
    }

    .star-rating .stars .empty {
      color: #e4e5e9;
    }

    .star-rating .rating-value {
      font-size: 14px;
      color: #666;
      margin-left: 5px;

    }

    footer .footer-logo {
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 20px;
      display: inline-block;
    }

    .footer-links h5 {
      font-size: 18px;
      margin-bottom: 20px;
      font-weight: 600;
    }

    .footer-links ul {
      list-style: none;
      padding-left: 0;
    }

    .footer-links li {
      margin-bottom: 10px;
    }

    .footer-links a {
      color: rgba(255, 255, 255, 0.8);
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .footer-links a:hover {
      color: white;
    }

    .copyright {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      text-align: center;
      color: rgba(255, 255, 255, 0.6);
      font-size: 14px;
    }

    .attraction-card {
      height: 100%;
      border: none;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease;
      background-color: white;
    }

    .attraction-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    }

    .attraction-image {
      width: 100%;
      height: 180px;
      object-fit: cover;
    }

    .attraction-body {
      padding: 15px;
    }

    .attraction-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 5px;
      color: #050b7c;
    }

    .attraction-category {
      display: inline-block;
      background-color: #e9ecef;
      color: #495057;
      padding: 3px 8px;
      border-radius: 4px;
      font-size: 12px;
      margin-bottom: 10px;
    }

    .attraction-address {
      color: #6c757d;
      font-size: 14px;
      margin-bottom: 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    #attractions-section {
      padding: 60px 0;
      background-color: #ffffff;
    }

    .section-title {
      color: #050b7c;
      margin-bottom: 30px;
      text-align: center;
      font-weight: 600;
    }

    #recommendations-section {
      margin-top: 0;
      padding-top: 30px;
      background-color: #f8f9fa;
      box-shadow: none;
    }

    .recommendation-card {
      height: 100%;
      border: none;
      padding: 0;
      margin-bottom: 0;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      transition: 0.3s;
      background-color: white;
    }

    .recommendation-card:hover {
      transform: scale(1.02);
    }

    .recommendation-image {
      width: 100%;
      height: 180px;
      object-fit: cover;
    }

    .recommendation-body {
      padding: 15px;
    }

    .recommendation-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 10px;
      color: #333;
    }

    .recommendation-rating {
      margin-bottom: 10px;
    }

    .recommendation-price {
      font-weight: 500;
      margin-bottom: 10px;
    }

    .recommendation-location {
      color: #666;
      margin-bottom: 10px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .recommendation-reasons {
      font-size: 14px;
      color: #666;
      padding-left: 0;
      list-style-type: none;
    }

    .recommendation-reasons li {
      margin-bottom: 5px;
      position: relative;
      padding-left: 18px;
    }

    .recommendation-reasons li:before {
      content: "â€¢";
      position: absolute;
      left: 0;
      color: #007bff;
    }
  </style>
</head>

<body>

  <header class="site-header js-site-header">
    <div class="container-fluid">
      <div class="row align-items-center">
        <div class="col-6 col-lg-4 site-logo" data-aos="fade"><a href="index.html">InnovateStay</a></div>
        <div class="col-6 col-lg-8 text-end">
          <div class="col-6 col-lg-8 text-end">

          </div>


        </div>
      </div>
    </div>
  </header>

  <section class="site-hero overlay" style="background-image: url(images/hero_4.jpg)"
    data-stellar-background-ratio="0.5">
    <div class="container">
      <div class="row site-hero-inner justify-content-center align-items-center">
        <div class="col-md-10 text-center" data-aos="fade-up">
          <h4 class="heading">Booking hotels has never been smarter</h4>
        </div>
      </div>
    </div>
  </section>

  <section class="section bg-light pb-0">
    <div id="search-container"></div>
  </section>



  <script src="js/common.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      fetch("search-form.html")
        .then(response => response.text())
        .then(html => {
          document.getElementById("search-container").innerHTML = html;
        })
        .catch(error => console.error("Error loading search form:", error));
      fetchRecommendations();

      fetchUAEAttractions();

    });
    async function getUserId() {
      try {
        const response = await fetch("/users/profile", {
          method: "GET",
          credentials: "include"
        });

        if (!response.ok) {
          throw new Error("User not logged in");
        }

        const user = await response.json();
        return user.id;
      } catch (error) {
        console.error("Error fetching user ID:", error);
        return null;
      }
    }

    async function fetchRecommendations() {
      try {
        const userId = await getUserId();




        const response = await fetch("http://localhost:5000/recommendations", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            user_id: userId,

            location_specific: false
          }),
        });

        if (!response.ok) {
          throw new Error("Failed to fetch recommendations");
        }

        const data = await response.json();
        console.log("Received Recommendations:", data);

        if (!data || !data.recommendations) {
          throw new Error("Invalid response format: " + JSON.stringify(data));
        }

        displayRecommendations(data.recommendations);
        return data.recommendations;
      } catch (error) {
        console.error("Error fetching recommendations:", error);
        displayRecommendations([]);
        return [];
      }
    }

    function displayRecommendations(recommendations) {
      const recommendationsContainer = document.getElementById("recommendations-list");
      recommendationsContainer.innerHTML = "";

      if (recommendations.length === 0) {
        recommendationsContainer.innerHTML = "<div class='col-12'><p>No recommendations available.</p></div>";
        return;
      }

      recommendations.forEach((hotel) => {
        const col = document.createElement("div");
        col.classList.add("col-md-4", "mb-4");


        let reasonsHTML = '';
        if (hotel.reasons && hotel.reasons.length > 0) {
          reasonsHTML = `
                <ul class="recommendation-reasons mt-2">
                    ${hotel.reasons.slice(0, 2).map(reason => `<li>${reason}</li>`).join('')}
                </ul>
            `;
        }
        let starRating = '';
        if (hotel.rating) {
          let numericRating = 0;

          if (typeof hotel.rating === 'string') {
            const ratingText = hotel.rating.toLowerCase();
            if (ratingText.includes('five')) numericRating = 5;
            else if (ratingText.includes('four')) numericRating = 4;
            else if (ratingText.includes('three')) numericRating = 3;
            else if (ratingText.includes('two')) numericRating = 2;
            else if (ratingText.includes('one')) numericRating = 1;
            else numericRating = parseFloat(hotel.rating) || 0;
          } else if (typeof hotel.rating === 'number') {
            numericRating = hotel.rating;
          }

          numericRating = Math.min(5, Math.max(0, numericRating));

          const fullStars = Math.floor(numericRating);
          const hasHalfStar = numericRating % 1 >= 0.5;
          const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);

          starRating = `
        <div class="star-rating">
            <div class="stars">
                ${'<i class="fa fa-star"></i>'.repeat(fullStars)}
                ${hasHalfStar ? '<i class="fa fa-star-half-o"></i>' : ''}
                ${'<i class="fa fa-star-o empty"></i>'.repeat(emptyStars)}
            </div>
            <span class="rating-value">${numericRating.toFixed(1)}</span>
        </div>
    `;
        }
        const imageUrl = hotel.imageUrl || 'images/default_hotel.jpg';


        const location = hotel.location || hotel.city_name || 'Location not specified';

        col.innerHTML = `
            <div class="recommendation-card">
                <img src="${imageUrl}" class="recommendation-image" alt="${hotel.name}" onerror="this.src='images/default_hotel.jpg'">
                <div class="recommendation-body">
                    <h5 class="recommendation-title">${hotel.name}</h5>
                     ${starRating}
                    <p class="recommendation-price"><strong>Price:</strong> AED ${hotel.price_per_night || 0} per night</p>
                    <p class="recommendation-location"><strong>Location:</strong> ${location}</p>
                    ${reasonsHTML}
            
                </div>
            </div>
        `;

        recommendationsContainer.appendChild(col);
      });
    }
    function loadUAEAttractions() {
      const attractions = [
        {
          name: "Al Bateen Public Beach",
          category: "Beach",
          location: "Abu Dhabi",
          image: "images/al-bateen-beach.jpg"
        },
        {
          name: "Al Qana",
          category: "Plaza",
          location: "Rabdan, Al Maqta' St, Abu Dhabi",
          image: "images/al-qana.jpg"
        },
        {
          name: "Qasr Al Hosn",
          category: "Historic Site",
          location: "Al Hosn, Sheikh Zayed, Abu Dhabi",
          image: "images/qasr-al-hosn.jpg"
        },
        {
          name: "Mamsha Al Saadiyat",
          category: "Pedestrian Plaza",
          location: "Saadiyat Island, Abu Dhabi",
          image: "images/mamsha-al-saadiyat.jpg"
        },
        {
          name: "Yas Bay Waterfront",
          category: "Waterfront",
          location: "Yas Island, Abu Dhabi",
          image: "images/yas-bay.jpg"
        },
        {
          name: "Marina Walk",
          category: "Restaurant Area",
          location: "Dubai Marina, Dubai",
          image: "images/marina-walk.jpg"
        }
      ];

      displayAttractions(attractions);
    }

    async function fetchUAEAttractions() {
      const API_KEY = 'fsq330yXgwzesuFIVFYlycUkSRoLAiqtY35sdzEvCLoZDdU=';
      const URL = `https://api.foursquare.com/v3/places/search?near=Abu Dhabi,UAE&limit=6&categories=16000`;

      try {
        const response = await fetch(URL, {
          headers: {
            'Authorization': API_KEY,
            'Accept': 'application/json'
          }
        });

        if (!response.ok) throw new Error('Failed to fetch attractions');
        const data = await response.json();

        const attractionsWithImages = data.results.map((place, index) => {
          const imageNames = [
            'UmmAlEmarat.jpg',
            'qasr-al-hosn.jpg',
            'Corniche.jpg',
            'Lakepark.jpg',
            'mamsha-al-saadiyat.jpg',
            'al-bateen-beach.jpg'
          ];

          return {
            name: place.name,
            category: place.categories?.[0]?.name || 'Attraction',
            location: place.location?.formatted_address || 'UAE',
            image: `images/${imageNames[index % imageNames.length]}`
          };
        });

        displayAttractions(attractionsWithImages);
      } catch (error) {
        console.error('Error:', error);

        loadUAEAttractions();
      }
    }


    function displayAttractions(attractions) {
      const container = document.getElementById('attractions-list');
      container.innerHTML = '';

      attractions.forEach(place => {
        const col = document.createElement('div');
        col.className = 'col-md-4 mb-4';

        col.innerHTML = `
      <div class="attraction-card">
        <img src="${place.image}" class="attraction-image" alt="${place.name}" onerror="this.src='images/placeholder.jpg'">
        <div class="attraction-body">
          <h5 class="attraction-title">${place.name}</h5>
          <span class="attraction-category">${place.category}</span>
          <p class="attraction-address">${place.location}</p>
        </div>
      </div>
    `;
        container.appendChild(col);
      });
    }
  </script>

  </section>

  <section class="py-5 bg-light">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-6 order-md-1" data-aos="fade-up">
          <h2 class="mb-4">Why Choose InnovateStay?</h2>
          <p class="mb-4">Experience a new era of travel planning with our hotel booking platform. Our
            technology curates personalized recommendations tailored to your preferences, ensuring a
            seamless booking process.</p>
          <ul class="list-unstyled mb-4">
            <li class="mb-2"><i class="fa fa-check text-primary mr-2"></i> AI-powered personalized recommendations</li>
            <li class="mb-2"><i class="fa fa-check text-primary mr-2"></i> Best price guarantee</li>
            <li class="mb-2"><i class="fa fa-check text-primary mr-2"></i> 24/7 customer support</li>
          </ul>
          <a href="hotels.html" class="btn btn-primary">Explore Hotels</a>
        </div>
        <div class="col-md-6 order-md-2 mb-5 mb-md-0 d-flex justify-content-center" data-aos="fade-up">
          <div style="max-width: 60%;">
            <img src="images/tech_stay.jpg" alt="AI Hotel Booking" class="img-fluid rounded shadow">
          </div>
        </div>
      </div>
    </div>
  </section>
  <section id="attractions-section" class="section">
    <div class="container">
      <h2 class="section-title">Popular UAE Attractions</h2>
      <div class="row" id="attractions-list"></div>
    </div>
  </section>


  <section id="recommendations-section" class="section bg-light pb-4">
    <div class="container">
      <h2 class="mb-4">Recommended Hotels</h2>
      <div class="row" id="recommendations-list">

      </div>
    </div>
  </section>
  <footer style="background-color: #313661;" class="text-white py-5">
    <div class="container">
      <div class="row justify-content-between text-center text-md-start">
        <div class="col-md-4 mb-4 mb-md-0">
          <a href="index.html" class="footer-logo text-white h4 d-block mb-2">InnovateStay</a>
          <p>Your trusted AI-powered hotel booking platform, making travel planning smarter and easier.</p>
        </div>

        <div class="col-md-3 mb-4 mb-md-0">
          <h5 class="text-white fw-bold">Support</h5>
          <ul class="list-unstyled">
            <li><a href="/cancel-reservation.html" class="text-white text-decoration-none">Cancel Reservation</a></li>
          </ul>
        </div>

        <div class="col-md-3">
          <h5 class="text-white fw-bold">Contact</h5>
          <ul class="list-unstyled">
            <li><a href="#" class="text-white text-decoration-none">+971 50 123 4567</a></li>
            <li><a href="#" class="text-white text-decoration-none">bookings.innnovate@gmail.com</a></li>
            <li><a href="#" class="text-white text-decoration-none">Abu Dhabi, UAE</a></li>
          </ul>
        </div>
      </div>

      <div class="text-center pt-4 mt-4 border-top border-light">
        <p class="mb-0">&copy; 2025 InnovateStay. All rights reserved.</p>
      </div>
    </div>
  </footer>


  <script src="js/jquery-3.3.1.min.js"></script>
  <script src="js/jquery-migrate-3.0.1.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/jquery.stellar.min.js"></script>
  <script src="js/jquery.fancybox.min.js"></script>
  <script src="js/auth-nav.js"></script>

  <script src="js/aos.js"></script>

  <script src="js/bootstrap-datepicker.js"></script>
  <script src="js/jquery.timepicker.min.js"></script>



  <script src="js/main.js"></script>
</body>

</html>